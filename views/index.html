{% extends 'layouts/main.html' %}

{% block content %}
<div class="text-center mt-40">
  <h1>
    Stripe Press Shop
  </h1>
  <p class="text-secondary">
    Select an item to purchase
  </p>
</div>

{# --- Book cards rendered from BOOKS dict (single source of truth for pricing) --- #}
<div class="mt-40 row">
  {% for item_id, book in books.items() %}
  <div class="col">
    <div class="card box-shadow">
      <img src="{{ book.image }}" class="card-img-top" alt="{{ book.title }}">
      <div class="card-body">
        <h5 class="card-title">{{ book.title }}</h5>
        <strong>{{ book.author }}</strong>
        <p class="card-text mt-20">
          {{ book.description }}
        </p>
        {# Price computed from cents -- same value used to charge via PaymentIntent #}
        <a href="/checkout?item={{ item_id }}" class="btn btn-primary btn-block">
          Purchase â€” ${{ "%.2f"|format(book.amount / 100) }}
        </a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
